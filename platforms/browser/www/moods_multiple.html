<!DOCTYPE html>

<html>

<head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
    <!-- This is a wide open CSP declaration. To lock this down for production, see below. -->
    <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline'; style-src 'self' 'unsafe-inline'; media-src *" />
    <!-- Good default declaration:
    * gap: is required only on iOS (when using UIWebView) and is needed for JS->native communication
    * https://ssl.gstatic.com is required only on Android and is needed for TalkBack to function properly
    * Disables use of eval() and inline scripts in order to mitigate risk of XSS vulnerabilities. To change this:
        * Enable inline JS: add 'unsafe-inline' to default-src
        * Enable eval(): add 'unsafe-eval' to default-src
    * Create your own at http://cspisawesome.com
    -->
    <!-- <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: 'unsafe-inline' https://ssl.gstatic.com; style-src 'self' 'unsafe-inline'; media-src *" /> -->

    <link rel="stylesheet" type="text/css" href="css/app.css" />
    <title>YTS</title>

    <style>
        body {
            background-image: url(img/1PhoneMoodBG.png);
            background-size: cover; /* <------ */
            background-repeat: no-repeat;
            background-position: center center; /* optional, center the image */
        }
    </style>
</head>

<body>
    <div class="center-div">
        <!-- http://www.holshousersoftware.com/glass/ 
             http://buttonoptimizer.com/
            -->
        <table style="width: 100%; height: 100%;">
            <tr>
                <td style="vertical-align: top;">
                    <table style="width: 100%;" cellpadding="1" cellspacing="2">
                        <tr style="background-color: #1b314b;">
                            <td style="vertical-align: bottom; height: 30px;">
                                <a href="javascript:GoBack();" class="linkButton">
                                    <img src="img/backarrow.png" style="height: 30px;" /></a>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <img alt="" id="imgPartner1" src="img/MoodPartner1.png" style="width: 100%;" /></td>
                        </tr>
                        <tr>
                            <td style="text-align: center;">
                                <table style="width: 100%;">
                                    <tr>
                                        <td colspan="2">Select your sexual mood:</td>
                                    </tr>
                                    <tr>
                                        <td style="width: 50%;"><a href="javascript:ChangeMood(1,1);" class="linkButton">
                                            <img src="img/button_mood_11_off.png" id="imgMood11" /></a></td>
                                        <td style="width: 50%;"><a href="javascript:ChangeMood(1,2);" class="linkButton">
                                            <img src="img/button_mood_12_off.png" id="imgMood12" /></a></td>
                                    </tr>
                                    <tr>
                                        <td style="width: 50%;"><a href="javascript:ChangeMood(1,3);" class="linkButton">
                                            <img src="img/button_mood_13_off.png" id="imgMood13" /></a></td>
                                        <td style="width: 50%;"><a href="javascript:ChangeMood(1,4);" class="linkButton">
                                            <img src="img/button_mood_14_off.png" id="imgMood14" /></a></td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
            <tr>
                <td style="vertical-align: bottom;">
                    <table style="width: 100%;">
                        <tr>
                            <td colspan="2" style="color: #1b314b; text-align: center;">Please refer to me as:</td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                <table align="center">
                                    <tr>
                                        <td style="width: 20%;"><a href="javascript:ChangeGender(1,1);" class="linkButton">
                                            <img src="img/button_gender_1_off.png" id="imgGender11" /></a></td>
                                        <td style="width: 20%;"><a href="javascript:ChangeGender(1,2);" class="linkButton">
                                            <img src="img/button_gender_2_off.png" id="imgGender12" /></a></td>
                                        <td style="width: 20%;"><a href="javascript:ChangeGender(1,3);" class="linkButton">
                                            <img src="img/button_gender_3_off.png" id="imgGender13" /></a></td>
                                        <td style="width: 20%;"><a href="javascript:ChangeGender(1,4);" class="linkButton">
                                            <img src="img/button_gender_4_off.png" id="imgGender14" /></a></td>
                                        <td style="width: 20%;"><a href="javascript:ChangeGender(1,5);" class="linkButton">
                                            <img src="img/button_gender_5_off.png" id="imgGender15" /></a></td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
    </div>
    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="js/index.js"></script>

    <script type="text/javascript">
        (function () {
            // reset the stored variables
            localStorage.setItem('yts_Partner1Mood', '0');
            localStorage.setItem('yts_Partner1Sex', '');
            localStorage.setItem('yts_Partner2Mood', '0');
            localStorage.setItem('yts_Partner2Sex', '');

            if (getParameterByName('t') == 'multiple') {
                document.getElementById('imgPartner1').style.display = 'none';
            }
        })();

        function GoBack() {
            window.location.href = 'home.html';
        }

        function ChangeMood(partner, mood) {
            var img = document.getElementById('imgMood' + partner + mood);
            var tag = '_off';
            if (img.src.toLowerCase().indexOf('_off') > -1) { tag = '_on'; }
            img.src = 'img/button_mood_' + partner + mood + tag + '.png';

            var m = 0;
            for (var i = 1; i <= 4; i++) {
                if (i !== mood) {
                    document.getElementById('imgMood' + partner + i).src = 'img/button_mood_' + partner + i + '_off.png';
                }

                if (document.getElementById('imgMood' + partner + i).src.toLowerCase().indexOf('_on') > -1) { m = i; }
            }

            localStorage.setItem('yts_Partner' + partner + 'Mood', m);

            ValidateSelections();
        }

        function ChangeGender(partner, gender) {
            var img = document.getElementById('imgGender' + partner + gender);
            var tag = '_off';
            if (img.src.toLowerCase().indexOf('_off') > -1) { tag = '_on'; }
            img.src = 'img/button_gender_' + gender + tag + '.png';

            var g = '';
            for (var i = 1; i <= 5; i++) {
                if (i !== gender) {
                    document.getElementById('imgGender' + partner + i).src = 'img/button_gender_' + i + '_off.png';
                }

                if (document.getElementById('imgGender' + partner + i).src.toLowerCase().indexOf('_on') > -1) { g = GetGender(i); }
            }

            localStorage.setItem('yts_Partner' + partner + 'Sex', g);

            ValidateSelections();
            //ShowInfo(partner);
        }

        function GetGender(gender) {
            switch (gender) {
                case 1:
                    return 'he';
                    break;
                case 2:
                    return 'she';
                    break;
                case 3:
                    return 'they';
                    break;
                case 4:
                    return 'per';
                    break;
                case 5:
                    return 'zie';
                    break;
            }
        }

        function ShowInfo(partner) {
            alert('Partner: ' + partner + '\n' + 'Mood: ' + localStorage.getItem('yts_Partner' + partner + 'Mood') + '\n' + 'Sex: ' + localStorage.getItem('yts_Partner' + partner + 'Sex'));
        }

        function ValidateSelections() {
            var p1m = localStorage.getItem('yts_Partner1Mood');
            var p1s = localStorage.getItem('yts_Partner1Sex');

            // if we have a mood and gender send them to the next screen
            if (p1m !== '0' && p1s !== '') {
                window.location.href = 'facts.html?t=' + getParameterByName('t') + '&preview=' + getParameterByName('preview');
            }

            if (p1m == '4') { window.location.href = 'no_consent.html?t=nom&preview=' + getParameterByName('preview'); }
        }
    </script>
</body>

</html>
